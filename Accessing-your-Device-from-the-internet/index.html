


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Docker stack for getting started on IOT on the Raspberry PI">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.0">
    
    
      
        <title>Accessing your device from the internet - IOTstack</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.89dc9fe3.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#accessing-your-device-from-the-internet" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="IOTstack" class="md-header-nav__button md-logo" aria-label="IOTstack">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            IOTstack
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Accessing your device from the internet
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="IOTstack" class="md-nav__button md-logo" aria-label="IOTstack">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    IOTstack
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="IOTstack" class="md-nav__link">
      IOTstack
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Accessing your device from the internet
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="Accessing your device from the internet" class="md-nav__link md-nav__link--active">
      Accessing your device from the internet
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#duckdns" class="md-nav__link">
    DuckDNS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pivpn" class="md-nav__link">
    PiVPN
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zerotier" class="md-nav__link">
    Zerotier
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Adminer/" title="Adminer" class="md-nav__link">
      Adminer
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Backups/" title="Backups" class="md-nav__link">
      Backups
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Blynk_server/" title="Blynk server" class="md-nav__link">
      Blynk server
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Custom/" title="Custom container" class="md-nav__link">
      Custom container
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Docker-commands/" title="Docker commands" class="md-nav__link">
      Docker commands
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../EspruinoHub/" title="Espruinohub" class="md-nav__link">
      Espruinohub
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Getting-Started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Grafana/" title="Grafana" class="md-nav__link">
      Grafana
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Home-Assistant/" title="Home assistant" class="md-nav__link">
      Home assistant
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Home/" title="Wiki" class="md-nav__link">
      Wiki
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../How-the-script-works/" title="How the script works" class="md-nav__link">
      How the script works
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../InfluxDB/" title="InfluxDB" class="md-nav__link">
      InfluxDB
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../MariaDB/" title="MariaDB" class="md-nav__link">
      MariaDB
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Misc/" title="Miscellaneous" class="md-nav__link">
      Miscellaneous
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Mosquitto/" title="Mosquitto" class="md-nav__link">
      Mosquitto
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../MotionEye/" title="MotionQye" class="md-nav__link">
      MotionQye
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Native-RTL_433/" title="Native RTL_433" class="md-nav__link">
      Native RTL_433
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Networking/" title="Networking" class="md-nav__link">
      Networking
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../NextCloud/" title="Next Cloud" class="md-nav__link">
      Next Cloud
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Node-RED/" title="Node-RED" class="md-nav__link">
      Node-RED
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Pi-hole/" title="Pi-hole" class="md-nav__link">
      Pi-hole
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Plex/" title="Plex" class="md-nav__link">
      Plex
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Portainer-agent/" title="Portainer agent" class="md-nav__link">
      Portainer agent
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Portainer/" title="Portainer" class="md-nav__link">
      Portainer
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../PostgreSQL/" title="PostgreSQL" class="md-nav__link">
      PostgreSQL
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../RPIEasy_native/" title="RPIEasy" class="md-nav__link">
      RPIEasy
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../RTL_433-docker/" title="RTL_433 Docker" class="md-nav__link">
      RTL_433 Docker
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../TasmoAdmin/" title="TasmoAdmin" class="md-nav__link">
      TasmoAdmin
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Understanding-Containers/" title="Understanding containers" class="md-nav__link">
      Understanding containers
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Updating-the-Project/" title="Updating the project" class="md-nav__link">
      Updating the project
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Zigbee2MQTT/" title="Zigbe2MQTT" class="md-nav__link">
      Zigbe2MQTT
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../deconz/" title="deCONZ" class="md-nav__link">
      deCONZ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../diyHue/" title="DIY hue" class="md-nav__link">
      DIY hue
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../openHAB/" title="Openhab" class="md-nav__link">
      Openhab
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../x2go/" title="x2go" class="md-nav__link">
      x2go
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#duckdns" class="md-nav__link">
    DuckDNS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pivpn" class="md-nav__link">
    PiVPN
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zerotier" class="md-nav__link">
    Zerotier
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="accessing-your-device-from-the-internet">Accessing your device from the internet</h1>
<p>The challenge most of us face with remotely accessing your home network is that you don't have a static IP. From time to time the IP that your ISP assigns to you changes and it's difficult to keep up. Fortunately, there is a solution, a DynamicDNS. The section below shows you how to set up an easy to remember address that follows your public IP no matter when it changes.</p>
<p>Secondly, how do you get into your home network? Your router has a firewall that is designed to keep the rest of the internet out of your network to protect you. Here we install a VPN and configure the firewall to only allow very secure VPN traffic in. </p>
<h2 id="duckdns">DuckDNS</h2>
<p>If you want to have a dynamic DNS point to your Public IP I added a helper script.
Register with duckdns.org and create a subdomain name. Then edit the <code>nano ~/IOTstack/duck/duck.sh</code> file and add your</p>
<pre><code class="bash">DOMAINS=&quot;YOUR_DOMAINS&quot;
DUCKDNS_TOKEN=&quot;YOUR_DUCKDNS_TOKEN&quot;
</code></pre>

<p>first test the script to make sure it works <code>sudo ~/IOTstack/duck/duck.sh</code> then <code>cat /var/log/duck.log</code>. If you get KO then something has gone wrong and you should check out your settings in the script. If you get an OK then you can do the next step. </p>
<p>Create a cron job by running the following command <code>crontab -e</code></p>
<p>You will be asked to use an editor option 1 for nano should be fine
paste the following in the editor <code>*/5 * * * * sudo ~/IOTstack/duck/duck.sh &gt;/dev/null 2&gt;&amp;1</code> then ctrl+s and ctrl+x to save</p>
<p>Your Public IP should be updated every five minutes</p>
<h2 id="pivpn">PiVPN</h2>
<p>pimylifeup.com has an excellent tutorial on how to install <a href="https://pimylifeup.com/raspberry-pi-vpn-server/">PiVPN</a></p>
<p>In point 17 and 18 they mention using noip for their dynamic DNS. Here you can use the DuckDNS address if you created one.</p>
<p>Don't forget you need to open the port 1194 on your firewall. Most people won't be able to VPN from inside their network so download OpenVPN client for your mobile phone and try to connect over mobile data. (<a href="https://en.wikipedia.org/wiki/Hairpinning">More info.</a>)</p>
<p>Once you activate your VPN (from your phone/laptop/work computer) you will effectively be on your home network and you can access your devices as if you were on the wifi at home.</p>
<p>I personally use the VPN any time I'm on public wifi, all your traffic is secure.</p>
<h2 id="zerotier">Zerotier</h2>
<p>https://www.zerotier.com/</p>
<p>Zerotier is an alternative to PiVPN that doesn't require port forwarding on your router. It does however require registering for their free tier service <a href="https://my.zerotier.com/login">here</a>. </p>
<p>Kevin Zhang has written a how to guide <a href="https://iamkelv.in/blog/2017/06/zerotier.html">here</a>. Just note that the install link is outdated and should be:</p>
<pre><code>curl -s 'https://raw.githubusercontent.com/zerotier/ZeroTierOne/master/doc/contact%40zerotier.com.gpg' | gpg --import &amp;&amp; \
if z=$(curl -s 'https://install.zerotier.com/' | gpg); then echo &quot;$z&quot; | sudo bash; fi
</code></pre>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href=".." title="IOTstack" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                IOTstack
              </div>
            </div>
          </a>
        
        
          <a href="../Adminer/" title="Adminer" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Adminer
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" /></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.36cbf620.min.js"></script>
      <script src="../assets/javascripts/bundle.00c583dd.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.7f7c8775.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>